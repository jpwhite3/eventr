# Production environment configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false

# PostgreSQL Configuration (provided by production environment)
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool optimization for production
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.pool-name=HikariCP
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=30000

# AWS Configuration for production
spring.cloud.aws.region.static=${AWS_REGION:us-east-1}
aws.s3.bucket-name=${S3_BUCKET_NAME}
aws.dynamodb.table-name=${DYNAMODB_TABLE}

# CORS Configuration for Production - RESTRICTIVE
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Content-Type,Authorization,X-Requested-With,Accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers
cors.allow-credentials=true
cors.max-age=86400

# JWT Configuration for Production - CRITICAL SECURITY
# JWT secret MUST be provided via JWT_SECRET environment variable
# Use secure secret management system (AWS Secrets Manager, Azure Key Vault, etc.)
# Generate secure secret: openssl rand -base64 32
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration=${JWT_EXPIRATION:86400000}

# Email configuration for production
spring.mail.host=${SMTP_HOST}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME}
spring.mail.password=${SMTP_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=${SMTP_HOST}

# Production logging - minimal
logging.level.root=WARN
logging.level.com.eventr=INFO
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN

# Security settings for production
server.ssl.enabled=true
server.port=8443
server.error.include-stacktrace=never
server.error.include-message=never

# HTTPS Configuration for Production
# SSL/TLS Certificate Configuration
server.ssl.key-store=${SSL_KEYSTORE_PATH:classpath:keystore.p12}
server.ssl.key-store-type=PKCS12
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
server.ssl.key-alias=${SSL_KEY_ALIAS:eventr}

# TLS Protocol Configuration  
server.ssl.enabled-protocols=TLSv1.2,TLSv1.3
server.ssl.ciphers=TLS_AES_256_GCM_SHA384,TLS_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256

# HTTP to HTTPS Redirect Configuration
server.http.port=8080
server.redirect.https-port=8443

# Session Cookie Security
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict
server.servlet.session.timeout=1h

# Actuator security
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never
management.endpoints.web.base-path=/actuator